
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://Mamontosik.github.io/IgorMamontov_Summary/assesment_docker_unswer/">
      
      
        <link rel="prev" href="../assesment_kubernetes_unswer/">
      
      
        <link rel="next" href="../assesment_ansible_unswer/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Взаимодействие с docker - Summary Igor Mamontov ver.1</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Summary Igor Mamontov ver.1" class="md-header__button md-logo" aria-label="Summary Igor Mamontov ver.1" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Summary Igor Mamontov ver.1
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Взаимодействие с docker
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Summary Igor Mamontov ver.1" class="md-nav__button md-logo" aria-label="Summary Igor Mamontov ver.1" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Summary Igor Mamontov ver.1
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Обо мне
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Руководство DevOps инженера
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Руководство DevOps инженера
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux команды
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_sec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Про DevSecOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Полезные метрики
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Про Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Блокер сообщений Kafka
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git команды
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Подготовка к assesment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Подготовка к assesment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ответы для assesment (unsorted)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_handbook_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Названия, краткий справочник
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_port_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Список используемых портов
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_kafka_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Взаимодействие с kafka
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_linux_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Взаимодействие с linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_kubernetes_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Взаимодействие с k8s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Взаимодействие с docker
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Взаимодействие с docker
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#docker-" class="md-nav__link">
    <span class="md-ellipsis">
      Docker - открытая платформа для разработки, доставки и запуска приложений в контейнерах
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker - открытая платформа для разработки, доставки и запуска приложений в контейнерах">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Список команд для работы с docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Практики по работе с Docker образами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Команды и ключевые понятия docker compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose_1" class="md-nav__link">
    <span class="md-ellipsis">
      Что такое docker compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assesment_ansible_unswer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Взаимодействие с ansible
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Взаимодействие с docker</h1>

<p><a href="/IgorMamontov_Summary/">Обо мне</a> / Подготовка к assesment</p>
<h2 id="docker-">Docker - открытая платформа для разработки, доставки и запуска приложений в контейнерах</h2>
<h3 id="docker">Список команд для работы с docker</h3>
<table>
<thead>
<tr>
<th>Команда</th>
<th>Описание</th>
<th>Дополнительные параметры (с пояснением)</th>
<th>Пример команды</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker run</code></td>
<td>Создать и запустить контейнер из образа</td>
<td><code>-d</code> (detached), <code>--name &lt;name&gt;</code>, <code>-p host:container</code> (порт-маппинг), <code>-v host:container</code> (том), <code>--rm</code> (удалить после выхода), <code>-e KEY=VAL</code> (env)</td>
<td><code>docker run -d --name web -p 8080:80 nginx</code></td>
</tr>
<tr>
<td><code>docker build</code></td>
<td>Построить образ из Dockerfile</td>
<td><code>-t name:tag</code> (имя/тег), <code>-f &lt;Dockerfile&gt;</code> (файл), <code>--build-arg KEY=VAL</code></td>
<td><code>docker build -t myapp:1.0 .</code></td>
</tr>
<tr>
<td><code>docker pull</code></td>
<td>Скачать образ из реестра</td>
<td><code>&lt;image&gt;:&lt;tag&gt;</code> (по умолчанию <code>latest</code>)</td>
<td><code>docker pull redis:6.2</code></td>
</tr>
<tr>
<td><code>docker push</code></td>
<td>Отправить образ в реестр</td>
<td>Требует <code>docker login</code> и корректного имени репозитория</td>
<td><code>docker push myrepo/myapp:1.0</code></td>
</tr>
<tr>
<td><code>docker ps</code></td>
<td>Показать запущенные контейнеры</td>
<td><code>-a</code> (включая остановленные), <code>--format</code> (кастомный вывод)</td>
<td><code>docker ps -a --format '{{.ID}}\t{{.Names}}\t{{.Status}}'</code></td>
</tr>
<tr>
<td><code>docker images</code></td>
<td>Показать локальные образы</td>
<td><code>--format</code>, <code>-a</code> (включая промежуточные)</td>
<td><code>docker images --format '{{.Repository}}:{{.Tag}}\t{{.Size}}'</code></td>
</tr>
<tr>
<td><code>docker stop</code></td>
<td>Остановить запущенный контейнер (graceful)</td>
<td><code>-t &lt;secs&gt;</code> (таймаут перед SIGKILL)</td>
<td><code>docker stop -t 10 web</code></td>
</tr>
<tr>
<td><code>docker start</code></td>
<td>Запустить ранее созданный/остановленный контейнер</td>
<td>—</td>
<td><code>docker start web</code></td>
</tr>
<tr>
<td><code>docker restart</code></td>
<td>Перезапустить контейнер (stop + start)</td>
<td><code>-t &lt;secs&gt;</code></td>
<td><code>docker restart -t 5 web</code></td>
</tr>
<tr>
<td><code>docker rm</code></td>
<td>Удалить один или несколько контейнеров</td>
<td><code>-f</code> (force), <code>-v</code> (удалить связанные тома)</td>
<td><code>docker rm -f old_container</code></td>
</tr>
<tr>
<td><code>docker rmi</code></td>
<td>Удалить локальный образ</td>
<td><code>-f</code> (принудительно)</td>
<td><code>docker rmi myapp:1.0</code></td>
</tr>
<tr>
<td><code>docker exec</code></td>
<td>Выполнить команду внутри запущенного контейнера</td>
<td><code>-it</code> (интерактивный терминал), <code>-u</code> (пользователь)</td>
<td><code>docker exec -it web bash</code></td>
</tr>
<tr>
<td><code>docker logs</code></td>
<td>Просмотреть логи контейнера</td>
<td><code>-f</code> (follow), <code>--since</code>, <code>--tail &lt;n&gt;</code></td>
<td><code>docker logs -f --tail 100 web</code></td>
</tr>
<tr>
<td><code>docker inspect</code></td>
<td>Полная JSON‑информация о контейнере/образе/сети</td>
<td><code>--format '{{.Config}}'</code> для конкретных полей</td>
<td><code>docker inspect --format '{{.NetworkSettings.IPAddress}}' web</code></td>
</tr>
<tr>
<td><code>docker stats</code></td>
<td>Живые метрики (CPU, память) контейнеров</td>
<td><code>--no-stream</code> (одноразовый снимок), указывать контейнеры</td>
<td><code>docker stats --no-stream web db</code></td>
</tr>
<tr>
<td><code>docker network ls</code></td>
<td>Показать сети Docker</td>
<td><code>docker network inspect &lt;network&gt;</code> для деталей</td>
<td><code>docker network ls</code> / <code>docker network inspect bridge</code></td>
</tr>
<tr>
<td><code>docker volume ls</code></td>
<td>Показать тома Docker</td>
<td><code>docker volume inspect &lt;volume&gt;</code></td>
<td><code>docker volume ls</code></td>
</tr>
<tr>
<td><code>docker-compose up</code></td>
<td>(docker-compose) Поднять multi‑container приложение</td>
<td><code>-d</code> (detached), <code>--build</code>, <code>--scale svc=n</code></td>
<td><code>docker-compose up -d --build</code></td>
</tr>
<tr>
<td><code>docker system prune</code></td>
<td>Очистить неиспользуемые объекты</td>
<td><code>-a</code> (удалить все неиспользуемые образы), <code>--volumes</code></td>
<td><code>docker system prune -a --volumes</code></td>
</tr>
</tbody>
</table>
<h3 id="docker_1">Практики по работе с Docker образами</h3>
<table>
<thead>
<tr>
<th>Решение</th>
<th>Описание</th>
<th style="text-align: right;">Преимущества</th>
<th>Команда</th>
</tr>
</thead>
<tbody>
<tr>
<td>Multi-stage build</td>
<td>Сборка артефакта в одном этапе, копирование только runtime-артефактов в финальный образ</td>
<td style="text-align: right;">Существенно меньше размер, нет инструментов сборки в финале</td>
<td><code># builder\nFROM golang:1.20 AS builder\nWORKDIR /app\n... \n# final\nFROM gcr.io/distroless/static\nCOPY --from=builder /app/bin/myapp /myapp</code></td>
</tr>
<tr>
<td>Минимальные базовые образы (Alpine/Distroless/Scratch)</td>
<td>Использовать лёгкие или пустые образы вместо полноценных дистрибутивов</td>
<td style="text-align: right;">Меньше слоёв, меньший размер, меньше атакуемой поверхности</td>
<td><code>FROM python:3.11-slim</code> или <code>FROM gcr.io/distroless/base</code></td>
</tr>
<tr>
<td>Удаление build-зависимостей и кешей</td>
<td>После установки пакетов удалять списки apt/pip кеши и dev-пакеты</td>
<td style="text-align: right;">Уменьшение размера слоя после установки</td>
<td><code>RUN apt-get install -y build-essential &amp;&amp; make &amp;&amp; apt-get purge -y build-essential &amp;&amp; rm -rf /var/lib/apt/lists/*</code></td>
</tr>
<tr>
<td>.dockerignore</td>
<td>Исключать ненужные файлы/папки из контекста сборки</td>
<td style="text-align: right;">Меньший контекст → быстрее билд, меньше случайных файлов в образе</td>
<td><code>.dockerignore:\nnode_modules\n.git\nDockerfile</code></td>
</tr>
<tr>
<td>Правильный порядок слоёв</td>
<td>Помещать часто меняющиеся файлы позже, зависимые от них слои invalidируются реже</td>
<td style="text-align: right;">Лучшая кэшируемость билдов → быстрее сборки в CI</td>
<td>Сначала <code>COPY package.json</code> / <code>RUN npm ci</code>, потом <code>COPY . .</code></td>
</tr>
<tr>
<td>BuildKit и кеши слоёв</td>
<td>Включить BuildKit и использовать <code>--cache-from</code>/inline cache</td>
<td style="text-align: right;">Быстрые и повторяемые сборки в CI, уменьшение сетевого трафика</td>
<td><code>DOCKER_BUILDKIT=1 docker build --cache-from myrepo/myimage:cache -t myrepo/myimage:latest .</code></td>
</tr>
<tr>
<td>Минимизация количества слоёв</td>
<td>Объединять команды в одном RUN, использовать &amp;&amp; и очистку в том же слое</td>
<td style="text-align: right;">Меньше слоёв → меньше метаданных и небольшая экономия места</td>
<td><code>RUN apt-get update &amp;&amp; apt-get install -y ... &amp;&amp; rm -rf /var/lib/apt/lists/*</code></td>
</tr>
<tr>
<td>Стриппинг и сжатие бинарей</td>
<td>Удаление символов отладки и сжатие (strip / upx) для собственных бинарей</td>
<td style="text-align: right;">Меньше размер исполняемого файла</td>
<td><code>RUN strip /app/bin/myapp</code> или <code>RUN upx --best /app/bin/myapp</code></td>
</tr>
<tr>
<td>Использование runtime-only образа</td>
<td>Перенос только runtime-артефактов (бинарий/зависимостей) в чистый образ</td>
<td style="text-align: right;">Минимальный финальный образ без инструментов сборки</td>
<td>См. пример multi-stage (copy только бинарей)</td>
</tr>
<tr>
<td>Кэширование зависимостей (CI)</td>
<td>Кешировать слои с зависимостями между сборками в CI</td>
<td style="text-align: right;">Быстрая сборка при неизменных зависимостях</td>
<td>Использовать <code>--cache-from</code> или кэш runner (GitLab/Actions)</td>
</tr>
<tr>
<td>Установка без рекомендаций</td>
<td>apt-get install --no-install-recommends / pip install --no-cache-dir</td>
<td style="text-align: right;">Уменьшает установку лишних пакетов/файлов</td>
<td><code>RUN apt-get install -y --no-install-recommends curl</code></td>
</tr>
<tr>
<td>Сканирование и оптимизация уязвимостей</td>
<td>Trivy/Grype/Clair для поиска уязвимостей и удаления ненужных пакетов</td>
<td style="text-align: right;">Безопасность + удаление ненужного софта</td>
<td><code>trivy image myrepo/myapp:latest</code></td>
</tr>
<tr>
<td>Сжатие слоёв / squash (опционально)</td>
<td>Объединение слоёв в один (редко нужно при BuildKit)</td>
<td style="text-align: right;">Меньше метаданных; иногда помогает при legacy workflow</td>
<td><code>docker build --squash</code> (экспериментально)</td>
</tr>
<tr>
<td>Артефактная упаковка / distroless + шифрование</td>
<td>Использовать distroless и подписывать/сканировать образы</td>
<td style="text-align: right;">Минимизация векторов атаки и ЦСР/подписи образов</td>
<td><code>FROM gcr.io/distroless/static</code> + cosign/podman sign</td>
</tr>
</tbody>
</table>
<h3 id="docker-compose">Команды и ключевые понятия docker compose</h3>
<table>
<thead>
<tr>
<th>Компонент / команда</th>
<th>Описание</th>
<th>Параметры</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr>
<td>docker-compose.yml</td>
<td>Файл описания стека: services, networks, volumes, configs</td>
<td>version / services / volumes / networks / deploy и т.д.</td>
<td><code>version: "3.8"\nservices:\n  web:\n    image: nginx</code></td>
</tr>
<tr>
<td>docker compose up</td>
<td>Создать и запустить все сервисы из конфигурации</td>
<td><code>-d</code> (detached), <code>--build</code>, <code>--remove-orphans</code></td>
<td><code>docker compose up -d --build</code></td>
</tr>
<tr>
<td>docker compose down</td>
<td>Остановить и удалить контейнеры/сети/тома (опционально)</td>
<td><code>--volumes</code>, <code>--rmi local|all</code></td>
<td><code>docker compose down --volumes</code></td>
</tr>
<tr>
<td>docker compose build</td>
<td>Построить образы по настройкам в compose</td>
<td><code>--no-cache</code>, <code>--pull</code></td>
<td><code>docker compose build --no-cache</code></td>
</tr>
<tr>
<td>docker compose logs</td>
<td>Просмотреть логи сервисов</td>
<td><code>-f</code> (follow), <code>--tail &lt;n&gt;</code></td>
<td><code>docker compose logs -f web</code></td>
</tr>
<tr>
<td>docker compose ps</td>
<td>Показать состояние сервисов и контейнеров</td>
<td><code>-a</code> (все)</td>
<td><code>docker compose ps</code></td>
</tr>
<tr>
<td>docker compose exec</td>
<td>Выполнить команду в запущенном контейнере</td>
<td><code>-T</code> (без псевдотерминала), <code>-u</code> (user)</td>
<td><code>docker compose exec web sh</code></td>
</tr>
<tr>
<td>docker compose run</td>
<td>Создать и запустить одноразовый контейнер в контексте сервиса</td>
<td><code>--rm</code>, <code>--no-deps</code>, <code>-e</code></td>
<td><code>docker compose run --rm web pytest</code></td>
</tr>
<tr>
<td>docker compose pull / push</td>
<td>Скачать / отправить образы из/в registry</td>
<td>—</td>
<td><code>docker compose pull</code></td>
</tr>
<tr>
<td>docker compose config</td>
<td>Валидация и вывод итогового объединённого конфига</td>
<td><code>--services</code>, <code>--volumes</code></td>
<td><code>docker compose config --services</code></td>
</tr>
<tr>
<td>profiles / depends_on</td>
<td>Контроль порядка запуска и условные профили</td>
<td><code>depends_on</code> — порядок; <code>profiles</code> — включение сервисов</td>
<td>В compose: <code>depends_on: - db</code></td>
</tr>
<tr>
<td>volumes</td>
<td>Том для хранения данных между перезапусками</td>
<td><code>driver</code>, <code>driver_opts</code>, <code>external</code></td>
<td><code>volumes:\n  dbdata:\n    driver: local</code></td>
</tr>
<tr>
<td>networks</td>
<td>Настройка сетей между сервисами (bridge, overlay)</td>
<td><code>driver</code>, <code>driver_opts</code>, <code>external</code></td>
<td><code>networks:\n  front:\n  back:</code></td>
</tr>
<tr>
<td>restart policy</td>
<td>Политика рестарта контейнера</td>
<td><code>no|always|on-failure|unless-stopped</code></td>
<td><code>restart: unless-stopped</code></td>
</tr>
<tr>
<td>env_file / environment</td>
<td>Передача переменных окружения в сервис</td>
<td><code>env_file: .env</code> или <code>environment:</code></td>
<td><code>environment:\n  - DB_HOST=db</code></td>
</tr>
</tbody>
</table>
<h3 id="docker-compose_1">Что такое docker compose</h3>
<div class="admonition note">
<p>Docker Compose — инструмент для определения и запуска многоконтейнерных Docker‑приложений через YAML‑файл (обычно docker-compose.yml). Описывает сервисы, сети и тома в декларативном виде; позволяет поднимать/остановливать стек одной командой.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "toc.follow", "navigation.tracking"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>